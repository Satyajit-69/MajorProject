<% layout('/layouts/boilerplate') -%>

<style>
    :root {
        --primary-red: #d90429;
        --dark-red: #8d0801;
        --classic-black: #1a1a1a;
        --pure-white: #ffffff;
    }

    body {
        background-color: var(--pure-white);
        font-family: 'Times New Roman', Times, serif; /* Classic Serif Font */
        color: var(--classic-black);
    }

    .form-container {
        border: 2px solid var(--classic-black);
        padding: 40px;
        background-color: var(--pure-white);
        box-shadow: 10px 10px 0px var(--primary-red);
    }

    h1 {
        font-weight: 900;
        text-transform: uppercase;
        letter-spacing: 2px;
        color: var(--classic-black);
        border-bottom: 4px solid var(--primary-red);
        display: inline-block;
        margin-bottom: 30px !important;
    }

    .form-label {
        font-weight: bold;
        text-transform: uppercase;
        font-size: 0.9rem;
        color: var(--classic-black);
    }

    .form-control {
        border: 1px solid var(--classic-black);
        border-radius: 0; /* Sharp edges for classic look */
        padding: 12px;
    }

    .form-control:focus {
        border-color: var(--primary-red);
        box-shadow: 0 0 0 0.25 red inset; /* Subtle red focus */
        outline: none;
    }

    .btn-ultimate {
        background-color: var(--primary-red);
        color: white;
        border: 2px solid var(--classic-black);
        border-radius: 0;
        font-weight: bold;
        text-transform: uppercase;
        transition: all 0.3s ease;
    }

    .btn-ultimate:hover {
        background-color: var(--classic-black);
        color: var(--pure-white);
        transform: translate(-2px, -2px);
        box-shadow: 4px 4px 0px var(--primary-red);
    }

    .form-text {
        color: var(--dark-red);
        font-style: italic;
    }
</style>

<div class="container mt-5 mb-5 d-flex justify-content-center">
    <div class="col-md-8 form-container">
        <div class="text-center">
            <h1 class="mb-4">Create New Listing</h1>
        </div>
        
        <form action="/listings" method="POST" class="needs-validation" novalidate enctype="multipart/form-data">

            <div class="mb-3">
                <label for="title" class="form-label">Title</label>
                <input 
                    name="listing[title]" 
                    id="title"
                    type="text" 
                    class="form-control" 
                    placeholder="E.G. LUXURY VILLA" 
                    required>
                <div class="invalid-feedback">Title is required.</div>
            </div>

            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea 
                    name="listing[description]"
                    id="description"
                    class="form-control"
                    rows="4"
                    placeholder="Provide details..." 
                    required></textarea>
                <div class="invalid-feedback">Description is required.</div>
            </div>
        
            <div class="mb-3">
                <label for="image" class="form-label">Upload Image</label>
                <input 
                    name="image" 
                    id="image"
                    type="file" 
                    class="form-control"
                    accept="image/*"
                    required>
                <div class="form-text">JPG, PNG, AVIF - Max 5MB</div>
            </div>

            <div class="row">
                <div class="mb-3 col-md-6">
                    <label for="price" class="form-label">Price</label>
                    <input 
                        name="listing[price]" 
                        id="price"
                        type="number"
                        class="form-control"
                        placeholder="0.00"
                        min="0"
                        step="0.01"
                        required>
                </div>

                <div class="mb-3 col-md-6">
                    <label for="country" class="form-label">Country</label>
                    <input 
                        name="listing[country]" 
                        id="country"
                        type="text"
                        class="form-control"
                        placeholder="Enter country" 
                        required>
                </div>
            </div>

            <div class="mb-4">
                <label for="location" class="form-label">Location</label>
                <input 
                    name="listing[location]" 
                    id="location"
                    type="text" 
                    class="form-control" 
                    placeholder="Enter city or address" 
                    required>
            </div>

            <button type="submit" class="btn btn-ultimate btn-lg w-100">
                Add Listing
            </button>
        </form>
    </div>
</div>

<script>
    (function() {
        'use strict';
        var forms = document.querySelectorAll('.needs-validation');
        Array.prototype.slice.call(forms).forEach(function(form) {
            form.addEventListener('submit', function(event) {
                if (!form.checkValidity()) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                form.classList.add('was-validated');
            }, false);
        });
    })();
</script>